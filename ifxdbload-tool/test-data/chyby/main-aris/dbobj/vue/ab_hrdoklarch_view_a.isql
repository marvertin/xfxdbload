--Cibis\Aris-PaySys\Models\Data\view_ab_hrdoklarch_view_a.sql

CREATE
   VIEW aris.ab_hrdoklarch_view_a 
   (
      ser,
      druh,
      zdroj,
      datuct,
      smer,
      castka,
      akce,
      uziv1,
      uziv2,
      uziv3,
      davkavznik,
      davkaucto,
      reftime,
      refuser,
      db_ucet,
      db_zkratka,
      db_coobjekt,
      db_varsym,
      db_text,
      cr_ucet,
      cr_zkratka,
      cr_coobjekt,
      cr_varsym,
      cr_text,
      db_konto,
      db_tko,
      db_sko,
      db_specsym,
      dbvaluta,
      dbpremrok,
      cr_konto,
      cr_tko,
      cr_sko,
      cr_specsym,
      crvaluta,
      crpremrok,
      db_davkacc,
      db_jezpraccc,
      db_jenepl,
      db_jeneplout,
      db_ckonto,
      db_cspecsym,
      db_cbanka,
      db_cidtran,
      db_ckonstsym,
      db_cuhrink,
      db_cpriorita,
      db_cdatpor,
      db_cdatuct,
      db_cvaluta,
      db_cdbident,
      db_ccrident,
      db_czprkli,
      db_czprbank,
      cr_davkacc,
      cr_jezpraccc,
      cr_jenepl,
      cr_jeneplout,
      cr_ckonto,
      cr_cspecsym,
      cr_cbanka,
      cr_cidtran,
      cr_ckonstsym,
      cr_cuhrink,
      cr_cpriorita,
      cr_cdatpor,
      cr_cdatuct,
      cr_cvaluta,
      cr_cdbident,
      cr_ccrident,
      cr_czprkli,
      cr_czprbank,
      hromprikaz,
      castkacelk,
      pocet,
      dbcr,
      dokladbds,
      dokladtyp,
      poruser,
      portime,
      potvrduser,
      potvrdtime,
      prvnidoklad,
      zauctuser,
      zaucttime
   )
   AS 
SELECT
   x2.ser ,
   x2.druh ,
   x2.zdroj ,
   x2.datuct ,
   x2.smer ,
   x2.castka ,
   x2.marketakce ,
   x2.uziv1 ,
   x2.uziv2 ,
   x2.uziv3 ,
   x1.davkavznik ,
   x2.davkaucto ,
   x2.reftime ,
   x2.refuser ,
   x3.ucet ,
   x3.zkratka ,
   x3.coobjekt ,
   x3.varsym ,
   x3.text ,
   x4.ucet ,
   x4.zkratka ,
   x4.coobjekt ,
   x4.varsym ,
   x4.text ,
   x5.konto ,
   x5.tko ,
   x5.sko ,
   ac_formatspecsym(x5.specsym ),
   x5.valuta ,
   x5.premrok ,
   x6.konto ,
   x6.tko ,
   x6.sko ,
   ac_formatspecsym(x6.specsym ),
   x6.valuta ,
   x6.premrok ,
   x7.davkacc ,
   x7.jezpraccc ,
   x7.jenepl ,
   x7.jeneplout ,
   x7.cizikonto ,
   ac_formatspecsym(x7.specsym ),
   x7.banka ,
   x7.idtran ,
   x7.konstsym ,
   x7.uhrink ,
   x7.priorita ,
   x7.datpor ,
   x7.cizidatuct ,
   x7.cizivaluta ,
   x7.dbident ,
   x7.crident ,
   x7.zprkli ,
   x7.zprbank ,
   x8.davkacc ,
   x8.jezpraccc ,
   x8.jenepl ,
   x8.jeneplout ,
   x8.cizikonto ,
   ac_formatspecsym(x8.specsym ),
   x8.banka ,
   x8.idtran ,
   x8.konstsym ,
   x8.uhrink ,
   x8.priorita ,
   x8.datpor ,
   x8.cizidatuct ,
   x8.cizivaluta ,
   x8.dbident ,
   x8.crident ,
   x8.zprkli ,
   x8.zprbank ,
   x0.ser ,
   x0.castkacelk ,
   x0.pocet ,
   x0.dbcr ,
   x1.dokladbds ,
   x1.dokladtyp ,
   x1.poruser ,
   x1.portime ,
   x1.potvrduser ,
   x1.potvrdtime ,
   x0.prvnidoklad,
   x1.zauctuser,
   X1.zaucttime
FROM
   "aris".arch_ab_hromdokl_arch x0 ,
   "aris".arch_ab_doklad_arch x1 ,
      OUTER("aris".arch_ac_uchead_den x2 ) ,
         OUTER("aris".arch_ac_ucbody_den x3 ) ,
            OUTER("aris".arch_ac_ucbody_den x4 ) ,
               OUTER("aris".arch_ac_memobody_den x5 ) ,
                  OUTER("aris".arch_ac_memobody_den x6 ) ,
                     OUTER("aris".arch_ac_outbody_den x7 ) ,
                        OUTER("aris".arch_ac_outbody_den x8 ) 
WHERE
   (((((((((((((((x0.ser = x1.hromprikaz ) AND
   (x1.ser = x2.ser ) ) AND
   (x3.ser = x1.ser ) ) AND
   (x3.dbcr = -1 ) ) AND
   (x4.ser = x1.ser ) ) AND
   (x4.dbcr = 1 ) ) AND
   (x5.ser = x1.ser ) ) AND
   (x5.dbcr = -1 ) ) AND
   (x6.ser = x1.ser ) ) AND
   (x6.dbcr = 1 ) ) AND
   (x7.ser = x1.ser ) ) AND
   (x7.dbcr = -1 ) ) AND
   (x8.ser = x1.ser ) ) AND
   (x8.dbcr = 1 ) ) AND
   (x1.dokladtyp IN ('HK' ,
   'HB' )) ) ;

