-- @TC:ONCE: ID = V2, B107572_RN00311507_3-cis_okoli_ins
-- @TC:ONCE: DESCRIPTION = Insolvence {CUSTOMERREQUEST}
BEGIN WORK;

-- Doplnění chybějících funkcí úloh
Insert into EP_UlohaFunkce_Cis (refuloha, id, nazev, platnost) Select serno, 'ROZPOJIT',   'Rozpojit insolvenci',           1 From EP_Uloha_Cis Where id = 'SPRINSOLV';
Insert into EP_UlohaFunkce_Cis (refuloha, id, nazev, platnost) Select serno, 'EXPPREHLED', 'Exportovat přehled insolvence', 1 From EP_Uloha_Cis Where id = 'SPRINSOLV';

-- Naplnění číselníku Parametry aktualizace okolí insolvence
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul, klasifminos, vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZAHAJIT'    and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 1, 0, 1, 0, 1, 1, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZMENIT'     and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZAMITNOUT'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 1, 0, 1,    1, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'STORNOVAT'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 1, 0, 1,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZADUPADEK'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 1, 0, 0, 0,    1, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'PRIHLPOHL'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'GENPRIHL'   and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'NEPRIHLPOH' and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'POPRPOHL'   and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'UZNATPOHL'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZADSPLKAL'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZADZPENEZ'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZADKALZPEN' and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZADKONKURZ' and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'UKONCIT'    and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 1, 0, 1,    1, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul, klasifminos, vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ZADOBZIV'   and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 1, 0, 1, 0, 1, 1, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'SPOJIT'     and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'ROZPOJIT'   and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 1, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'EXPORTOVAT' and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 0, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'EXPPREHLED' and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 0, 1 From EP_ParamInsolv_Cis;
Insert into EP_ParamInsolv_Cis (id, funkce, vytvinfoduv, urovinfoduv, nastavvinkul, zrusvinkul,              vytvsnimek, aktukol, platnost) Select NVL(Max(id), 0) + 1, (Select serno From EP_UlohaFunkce_Cis Where id = 'VYTREPORT'  and refuloha = (Select serno From EP_Uloha_Cis Where id = 'SPRINSOLV')), 0, 0, 0, 0,    0, 0, 1 From EP_ParamInsolv_Cis;

ROLLBACK WORK;
--End of B107572_RN00311507_3-cis_okoli_ins
